<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="res_partner_view_form_inherit">
            <field name="name">res.partner.view.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='schedule_meeting']" position="after">
                    <field name="is_salesman" invisible="1" />
                    <button type="object" class="oe_stat_button" name="open_action_followup_sales" icon="fa-list" attrs="{'invisible': [('is_salesman', '=', False)]}">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value"><field name="total_due" widget='monetary' options="{'currency_field': 'currency_id'}"/></span>
                            <span class="o_stat_text">Due</span>
                        </div>
                    </button>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="res_partner_view_form_inherit_filter">
            <field name="name">res.partner.view.form.inherit.filter</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_reports.res_partner_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='open_action_followup']" position="replace">
                    <field name="is_salesman" invisible="1" />
                    <button type="object" class="oe_stat_button" name="open_action_followup" icon="fa-list" attrs="{'invisible': [('is_salesman', '=', True)]}">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_value"><field name="total_due" widget="monetary" options="{'currency_field': 'currency_id'}"/></span>
                            <span class="o_stat_text">Due</span>
                        </div>
                    </button>
                </xpath>
            </field>
        </record>

        <template id="line_template_followup_report_inherit_2" inherit_id="account_reports.line_template_followup_report" >
            <xpath expr="//div[hasclass('dropdown-menu')]" position="replace">
                 <div t-if='context.get("print_mode") != True' class="dropdown-menu o_account_reports_domain_dropdown" role="menu" >
                    <a t-if="line['has_invoice']" role="menuitem" tabindex="-1" t-att-data-id="line['invoice_id']" t-att-view-id="line['view_invoice_id']" action="open_invoice" class="dropdown-item" groups="account.group_account_invoice">View Invoices</a>
                    <a role="menuitem" tabindex="-1" t-att-data-id="line['move_id']" action="open_move" groups="account.group_account_invoice" class="dropdown-item">View Journal Entry</a>
                    <a role="menuitem" tabindex="-1" t-att-data-id="line['id']" class="o_change_expected_date dropdown-item" groups="account.group_account_invoice">Change expected payment date</a>
                </div>
            </xpath>
        </template>


    </data>
</odoo>
